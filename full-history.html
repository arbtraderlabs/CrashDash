<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Signal History - CrashDash</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“‰</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <style>
        /* Mobile responsive table styles - horizontal scroll */
        @media (max-width: 768px) {
            .signals-table-wrapper {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                width: 100%;
            }
            
            .signals-table {
                font-size: 0.85rem;
                min-width: 750px;
                display: table;
            }
            
            .signals-table th,
            .signals-table td {
                padding: 0.6rem 0.5rem;
                white-space: nowrap;
            }
            
            /* Signal Type - hide text on mobile */
            .signals-table td:nth-child(4) .signal-type-text {
                display: none;
            }
            
            /* Enhanced ring animation */
            @keyframes pulse-glow {
                0%, 100% {
                    opacity: 0.3;
                    transform: translate(-50%, -50%) scale(1);
                }
                50% {
                    opacity: 0.6;
                    transform: translate(-50%, -50%) scale(1.15);
                }
            }
            
            .enhanced-ring {
                animation: pulse-glow 2s ease-in-out infinite;
            }
            
            /* Hide desktop text on mobile */
            .desktop-text {
                display: none;
            }
            
            /* Pagination controls - smaller on mobile */
            #paginationControls {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            #paginationControls button {
                padding: 0.4rem 0.8rem !important;
                font-size: 0.8rem !important;
            }
            
            #paginationControls > div {
                font-size: 0.75rem !important;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo-section">
                <a href="index.html" style="text-decoration: none; color: inherit;">
                    <h1 class="logo">
                        ğŸ“‰ <span class="logo-text">CRASH<span class="logo-dash">DASH</span></span>
                    </h1>
                </a>
            </div>
            
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search tickers..." autocomplete="off">
            </div>
            
            <div class="header-last-update" style="display: flex; align-items: center; gap: 0.3rem; flex-shrink: 0;">
                <a href="index.html" style="color: var(--white); text-decoration: none; font-size: 0.9rem; font-weight: 700;">â† Dashboard</a>
            </div>
        </div>
        
        <!-- NAVIGATION -->
        <div class="nav-and-filters">
            <nav class="nav-tabs">
                <a href="about.html">ğŸ“– About</a>
                <a href="strategy-guide.html">ğŸ“š Strategy</a>
                <a href="faq.html">â“ FAQ</a>
                <a href="roadmap.html">ğŸ§­ Roadmap</a>
                <a href="https://x.com/CrashDashAI" target="_blank" class="x-link" title="Follow us on X">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="display: inline-block; vertical-align: middle;">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
            </nav>
            <div class="header-filters">
                <button id="openFiltersBtn" class="filters-popup-button" onclick="openFiltersModal()">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" style="fill: currentColor;">
                        <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
                    </svg>
                    <span>Filters</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <div class="page-header">
            <h2>ğŸ“ˆ Full Signal History</h2>
            <p class="page-description">Complete list of all crash signals with detailed metrics</p>
        </div>

        <!-- Full History Table -->
        <div class="signals-table-wrapper" id="signalsWrapper">
            <table class="signals-table">
                <thead>
                    <tr id="tableHeader">
                        <th class="sortable" data-sort="ticker" style="cursor: pointer;">Ticker â†•</th>
                        <th class="sortable" data-sort="exchange" style="cursor: pointer;">Exchange â†•</th>
                        <th class="sortable" data-sort="date" style="cursor: pointer;">Signal Date â†•</th>
                        <th class="sortable" data-sort="signal_type" style="cursor: pointer;">Signal Type â†•</th>
                        <th class="sortable" data-sort="current_pnl" style="cursor: pointer;">Summary â†•</th>
                        <th class="sortable" data-sort="ai_score" style="cursor: pointer;"><span class="desktop-text">AI Score</span> âš¡ â†•</th>
                    </tr>
                </thead>
                <tbody id="signalsTableBody">
                    <!-- Signals loaded via JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Loading State -->
        <div class="loading-state" id="loadingState">
            <div class="spinner"></div>
            <p>Loading signal history...</p>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <p>No signals found matching your filters.</p>
        </div>
    </div>

    <!-- Filters Modal -->
    <div id="filtersModal" class="filters-modal" style="display: none;">
        <div class="filters-modal-overlay" onclick="closeFiltersModal()"></div>
        <div class="filters-modal-content">
            <div class="filters-modal-header">
                <h2>Filters</h2>
                <button class="filters-modal-close" onclick="closeFiltersModal()">&times;</button>
            </div>
            <div class="filters-modal-body">
                <div class="filter-group">
                    <label for="colorFilter">Signal Type</label>
                    <select id="colorFilter">
                        <option value="">All Colors</option>
                        <option value="PURPLE">ğŸŸ£ Purple (Enhanced)</option>
                        <option value="RED">ğŸ”´ Red (Ultra)</option>
                        <option value="ORANGE">ğŸŸ  Orange (Extreme)</option>
                        <option value="GREEN">ğŸŸ¢ Green (Deep)</option>
                        <option value="YELLOW">ğŸŸ¡ Yellow (Crash)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="marketFilter">Market</label>
                    <select id="marketFilter">
                        <option value="">All Markets</option>
                        <option value="LSE-MAIN">ğŸ”µ LSE MAIN</option>
                        <option value="LSE-AIM">ğŸŸ£ LSE AIM</option>
                        <option value="AQUIS-MAIN">ğŸŸ¢ AQUIS</option>
                    </select>
                </div>
            </div>
            <div class="filters-modal-footer">
                <button class="btn-secondary" onclick="resetFilters()">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" style="fill: currentColor; margin-right: 0.5rem;">
                        <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                    </svg>
                    Reset
                </button>
                <button class="btn-primary" onclick="applyFilters()">Apply</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="margin-top: 4rem;">
        <p>&copy; 2025 CrashDash. Educational purposes only. Not financial advice.</p>
        <p style="margin-top: 0.5rem; font-size: 0.8rem;">âš¡ When the Market Breaks, You Learn.</p>
        <div style="margin-top: 1rem; display: flex; gap: 1.5rem; justify-content: center; align-items: center;">
            <a href="https://x.com/CrashDashAI" target="_blank" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.85rem; display: flex; align-items: center; gap: 0.4rem;" title="Follow us on X">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                </svg>
                Follow on X
            </a>
            <a href="https://forms.gle/C5GChwRu8wYshbS69" target="_blank" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.85rem;">âœ‰ï¸ Contact Us</a>
        </div>
    </footer>

    <script src="full-history.js"></script>
</body>
</html>
