<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Signal History - CrashDash</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìâ</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo-section">
                <a href="index.html" style="text-decoration: none; color: inherit;">
                    <h1 class="logo">
                        üìâ <span class="logo-text">CRASH<span class="logo-dash">DASH</span></span>
                    </h1>
                </a>
            </div>
            
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search tickers..." autocomplete="off">
            </div>
            
            <div class="time-display" id="lastRefresh">
                <span id="refreshDate"></span>
                <span id="refreshTime"></span>
                <span id="refreshLabel">Last refresh</span>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <div class="page-header">
            <h2>üìà Full Signal History</h2>
            <p class="page-description">Complete list of all crash signals with detailed metrics</p>
        </div>

        <!-- Full History Table -->
        <div class="signals-table-wrapper" id="signalsWrapper">
            <table class="signals-table">
                <thead>
                    <tr id="tableHeader">
                        <th class="sortable" data-sort="ticker">Ticker</th>
                        <th class="sortable" data-sort="date">Signal Date</th>
                        <th class="sortable" data-sort="signal_type">Signal Type</th>
                        <th class="sortable" data-sort="current_pnl">Summary</th>
                        <th class="sortable" data-sort="best_rally">Best Rally</th>
                        <th class="sortable" data-sort="ai_score"><span class="desktop-text">AI Score</span> ‚ö°</th>
                    </tr>
                    <tr id="compressedHeader" style="display: none;">
                        <th class="sortable" data-sort="ticker">Ticker</th>
                        <th class="sortable" data-sort="signal_count">Buy Alerts</th>
                        <th class="sortable" data-sort="latest_pnl">Summary</th>
                        <th class="sortable" data-sort="latest_score"><span class="desktop-text">AI Score</span> ‚ö°</th>
                    </tr>
                </thead>
                <tbody id="signalsTableBody">
                    <!-- Signals loaded via JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Loading State -->
        <div class="loading-state" id="loadingState">
            <div class="spinner"></div>
            <p>Loading signal history...</p>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <p>No signals found matching your filters.</p>
        </div>
    </div>

    <!-- Footer -->
    <footer style="text-align: center; padding: 2rem; color: #6B7280; margin-top: 4rem;">
        <p>&copy; 2025 CrashDash. Data refreshed every 4 hours during market hours.</p>
        <p style="font-size: 0.85rem; margin-top: 0.5rem;">
            <a href="index.html" style="color: #0A84FF; text-decoration: none;">‚Üê Back to Dashboard</a>
        </p>
    </footer>

    <!-- Hidden elements for app.js compatibility -->
    <div id="toggleSlider" style="display: none;"></div>
    <div id="compactIcon" style="display: none;"></div>
    <div id="detailIcon" style="display: none;"></div>
    <input id="searchInput" type="hidden">
    <input id="colorFilter" type="hidden">
    <select id="sectorFilter" style="display: none;"></select>
    <select id="marketFilter" style="display: none;"></select>
    <select id="marketCapFilter" style="display: none;"></select>
    <input id="minAiScore" type="hidden" value="0">
    <div id="filterCount" style="display: none;"></div>

    <script src="app.js"></script>
    <script>
        // Force full mode for this page
        viewMode = 'full';
        updateViewModeUI();
    </script>
</body>
</html>
