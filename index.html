<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crash Dash - When the Market Breaks, You Don't.</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Papa Parse for CSV parsing - using local copy -->
    <script src="papaparse.min.js"></script>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="header-content">
            <div class="logo-section">
                <img src="assets/logo.svg" alt="Crash Dash Logo" class="logo">
            </div>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="ğŸ” Search ticker or company name...">
            </div>
            <div class="header-last-update" style="display: flex; align-items: center; gap: 0.3rem; flex-shrink: 0;">
                <div style="display: flex; flex-direction: column; align-items: flex-end;">
                    <span id="headerLastUpdate" style="font-size: 0.7rem; font-weight: 600; color: var(--white); line-height: 1.2;">-</span>
                    <span id="headerLastUpdateTime" style="font-size: 0.55rem; color: rgba(255,255,255,0.8); line-height: 1;">-</span>
                    <span style="font-size: 0.55rem; font-style: italic; color: rgba(255,255,255,0.6); line-height: 1;">Last refresh</span>
                </div>
            </div>
        </div>
        
        <!-- NAVIGATION AND FILTERS -->
        <div class="nav-and-filters">
            <nav class="nav-tabs">
                <a href="about.html">ğŸ“– About</a>
                <a href="strategy-guide.html">ğŸ“š Strategy</a>
                <a href="faq.html">â“ FAQ</a>
                <a href="roadmap.html">ğŸ§­ Roadmap</a>
                <a href="https://x.com/CrashDashAI" target="_blank" class="x-link" title="Follow us on X">
                    <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" style="display: inline-block; vertical-align: middle;">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
            </nav>
            <div class="header-filters">
                <a href="#how-to-use" class="how-to-use-btn">ğŸ’¡ How to Use</a>
                
                <button id="openFiltersBtn" class="filters-popup-button">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" style="fill: currentColor;">
                        <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/>
                    </svg>
                    <span>Filters</span>
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="0.9em" width="0.9em" style="fill: currentColor; opacity: 0.7; margin-left: 0.2rem;" onclick="event.stopPropagation(); resetFilters();" id="resetIconBtn" title="Reset Filters" style="display: none;">
                        <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
                    </svg>
                </button>
                
                <!-- VIEW MODE TOGGLE -->
                <div class="view-mode-compact">
                    <label class="view-toggle-label-compact">View:</label>
                    <div class="toggle-switch-compact" onclick="toggleViewMode()">
                        <div class="toggle-track-compact">
                            <div id="toggleSlider" class="toggle-slider-compact"></div>
                        </div>
                        <span class="toggle-icon" id="compactIcon">â–¤</span>
                        <span class="toggle-icon" id="detailIcon">â˜°</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- HERO SECTION (Desktop Only) -->
    <div class="hero-section">
        <h1>CRASH DASH</h1>
        <p class="hero-tagline">Your source for mispriced fear and asymmetric opportunity.</p>
        <p class="hero-subtitle">When the Market Breaks, You Don't.</p>
    </div>

    <!-- MAIN CONTAINER -->
    <div class="container">
        
        <!-- STATS CARDS - COMPACT -->
        <div class="stats-grid-compact" id="statsGrid">
            <div class="stat-card-mini">
                <span class="stat-icon">ğŸ“Š</span>
                <div class="stat-content">
                    <span class="stat-value-mini" id="totalTickers">600+</span>
                    <span class="stat-label-mini">Tickers</span>
                </div>
            </div>
            <div class="stat-card-mini">
                <span class="stat-icon">ğŸ¯</span>
                <div class="stat-content">
                    <span class="stat-value-mini" id="totalSignals">-</span>
                    <span class="stat-label-mini">Signals</span>
                </div>
            </div>
            <div class="stat-card-mini highlight-purple">
                <span class="stat-icon">ğŸŸ£</span>
                <div class="stat-content">
                    <span class="stat-value-mini" id="purpleCount">-</span>
                    <span class="stat-label-mini">Enhanced</span>
                </div>
            </div>
            <div class="stat-card-mini highlight-red">
                <span class="stat-icon">ğŸ”´</span>
                <div class="stat-content">
                    <span class="stat-value-mini" id="redCount">-</span>
                    <span class="stat-label-mini">Ultra</span>
                </div>
            </div>
            <div class="stat-card-mini">
                <span class="stat-icon">â°</span>
                <div class="stat-content">
                    <span class="stat-value-mini" id="lastUpdate">-</span>
                </div>
            </div>
        </div>

        <!-- SMARTREPORT AI TEASER -->
        <div style="display: flex; justify-content: center; margin: 1.5rem 2rem;">
            <div class="ai-teaser-wrapper">
                <button class="ai-teaser-button" disabled>
                    <span class="ai-icon">âš¡</span>
                    <div class="ai-teaser-content">
                        <div class="ai-teaser-title">SmartReport AI</div>
                        <div class="ai-teaser-subtitle">COMING SOON</div>
                    </div>
                    <span class="ai-badge">Powered by Engine V4</span>
                </button>
            </div>
        </div>

        <!-- SIGNALS TABLE -->
        <div class="signals-table-wrapper" id="signalsWrapper" style="touch-action: pan-x; -ms-touch-action: pan-x; overscroll-behavior-x: contain;">
            <table class="signals-table">
                <thead>
                    <tr id="tableHeader">
                        <th class="sortable" data-sort="ticker">Ticker</th>
                        <th class="sortable" data-sort="date">Signal Date</th>
                        <th class="sortable" data-sort="signal_type">Signal Type</th>
                        <th class="sortable" data-sort="ai_score"><span class="desktop-text">AI Score</span> âš¡</th>
                        <th class="sortable" data-sort="current_pnl">Entry â†’ P&L</th>
                        <th class="sortable" data-sort="best_rally">Best Rally</th>
                    </tr>
                    <tr id="compressedHeader" style="display: none;">
                        <th class="sortable" data-sort="ticker">Ticker</th>
                        <th class="sortable" data-sort="signal_count">Signals</th>
                        <th class="sortable" data-sort="latest_score"><span class="desktop-text">AI Score</span> âš¡</th>
                        <th class="sortable" data-sort="latest_pnl">Entry â†’ P&L</th>
                    </tr>
                </thead>
                <tbody id="signalsTableBody">
                    <tr>
                        <td colspan="6" class="loading">Loading signals...</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- EDUCATION PANEL -->
        <div class="education-panel" id="how-to-use">
            <h2 class="responsive-text">ğŸ“š How to Use CrashDash</h2>
            
            <h3 class="responsive-text" style="margin-top: 1.5rem; color: var(--split-yellow);">Signal Color Guide</h3>
            <div class="color-guide">
                <div class="color-explanation purple">
                    <h3 class="responsive-text">ğŸŸ£ PURPLE â€“ Enhanced Combo</h3>
                    <p class="responsive-text"><strong>What it means:</strong> Our strongest type of setup. A major crash followed by signs of quiet buying and price stabilisation.</p>
                    <p class="responsive-text"><strong>How to use it:</strong> Shortlist for your highest-conviction recovery ideas. Still high risk, but the most "stacked" conditions.</p>
                </div>
                
                <div class="color-explanation red">
                    <h3 class="responsive-text">ğŸ”´ RED â€“ Ultra Crash</h3>
                    <p class="responsive-text"><strong>What it means:</strong> Brutal, wash-out style move. The stock has been hammered and is sitting in extreme crash territory.</p>
                    <p class="responsive-text"><strong>How to use it:</strong> For traders who like maximum risk / maximum reward. Only makes sense if you truly understand the story and can handle heavy volatility.</p>
                </div>
                
                <div class="color-explanation orange">
                    <h3 class="responsive-text">ğŸŸ  ORANGE â€“ Extreme Crash</h3>
                    <p class="responsive-text"><strong>What it means:</strong> Severe damage, but with signs that the selling pressure may be fading.</p>
                    <p class="responsive-text"><strong>How to use it:</strong> Good for aggressive recovery hunters looking for big upside, while accepting that the trend may still be fragile.</p>
                </div>
                
                <div class="color-explanation green">
                    <h3 class="responsive-text">ğŸŸ¢ GREEN â€“ Deep Crash</h3>
                    <p class="responsive-text"><strong>What it means:</strong> A deep sell-off with improving technical conditions and a more "controlled" crash profile.</p>
                    <p class="responsive-text"><strong>How to use it:</strong> A balanced risk/reward zone. Often a sweet spot for people who want recovery potential without chasing the most extreme names.</p>
                </div>
                
                <div class="color-explanation yellow">
                    <h3 class="responsive-text">ğŸŸ¡ YELLOW â€“ Crash Zone</h3>
                    <p class="responsive-text"><strong>What it means:</strong> The stock has entered a meaningful drawdown and is on our radar, but conditions are still developing.</p>
                    <p class="responsive-text"><strong>How to use it:</strong> Treat these as early warning / watchlist candidates. Many will later get upgraded to Green, Orange, Red, or Purple if conditions strengthen.</p>
                </div>
            </div>

            <h3 class="responsive-text" style="margin-top: 2rem; color: var(--split-yellow);">ğŸš€ Key Metrics (Simple & Powerful)</h3>
            <div style="margin-top: 1rem; line-height: 1.8;">
                <p class="responsive-text"><strong>âš¡ AI Technical Score:</strong> A blended strength score that highlights oversold zones, momentum exhaustion, and recovery potential. Higher = stronger reversal setup.</p>
                <p class="responsive-text"><strong>ğŸ“‰ Drawdown %:</strong> How far the stock has fallen from its peak to its lowest point.</p>
                <p class="responsive-text"><strong>ğŸ’° Current P&L:</strong> Your return (%) if you bought at the moment the crash signal appeared.</p>
                <p class="responsive-text"><strong>ğŸ“ˆ Best Rally:</strong> The strongest bounce seen after similar crash-type conditions in the past.</p>
                <p class="responsive-text"><strong>ğŸ”„ Cycle Position:</strong> Where the price sits inside its short-term range. 0% = bottom of the range, 100% = top of the range. Lower values often indicate pressure â†’ potential recovery zones.</p>
                <p class="responsive-text"><strong>ğŸŸ¢ Win Rate:</strong> How often similar setups historically turned positive.</p>
            </div>

            <h3 class="responsive-text" style="margin-top: 2rem; color: var(--split-yellow);">âš ï¸ Risk Flags (What to Watch Out For)</h3>
            <div style="margin-top: 1rem; line-height: 1.8;">
                <p class="responsive-text"><strong>ğŸ§© Near Corporate Action:</strong> Signal triggered around a stock split or similar event â€” price behaviour can be distorted.</p>
                <p class="responsive-text"><strong>ğŸª“ Reverse Split History:</strong> Company has consolidated shares. Often associated with long-term decline or dilution risks.</p>
                <p class="responsive-text"><strong>ğŸ©¹ Deep Drawdown (80%+):</strong> Ultra-high risk territory. Big rebounds possible â€” but equally big downside.</p>
                <p class="responsive-text"><strong>ğŸª™ Penny Stock Zone:</strong> Trading under 1p. Low liquidity, wild swings, unpredictable spreads.</p>
                <p class="responsive-text"><strong>ğŸ” Frequent Crashes:</strong> Multiple crash-type events detected â€” may indicate instability or broken trend structure.</p>
            </div>

            <h3 class="responsive-text" style="margin-top: 2rem; color: var(--split-yellow);">Important Disclaimer</h3>
            <div style="margin-top: 1rem; line-height: 1.8; opacity: 0.8;">
                <p class="responsive-text"><strong>âš ï¸ CrashDash is a research and education tool, not a financial advisor.</strong> Nothing on this site constitutes investment, tax, or legal advice. All investments carry risk, and you can lose money. Past performance and historical patterns do not guarantee future results. Always do your own research and, where appropriate, consult a qualified financial professional before acting on any information.</p>
            </div>

            <h3 class="responsive-text" style="margin-top: 1.5rem; color: var(--split-yellow);">Data & Signals</h3>
            <div style="margin-top: 1rem; line-height: 1.8; opacity: 0.8;">
                <p class="responsive-text"><strong>ğŸ“Š CrashDash currently focuses on London-listed equities</strong> (including the LSE AIM market) and other selected markets. Signals are generated by our internal pattern-detection models using long-range historical market data. Data and analytics are provided "as is" with no guarantee of accuracy, completeness, or timeliness.</p>
            </div>
        </div>

    </div>

    <!-- FILTERS POPUP MODAL -->
    <div id="filtersModal" class="filters-modal" style="display: none;">
        <div class="filters-modal-overlay" onclick="closeFiltersModal()"></div>
        <div class="filters-modal-content">
            <div class="filters-modal-header">
                <h2>Filters</h2>
                <button class="filters-modal-close" onclick="closeFiltersModal()">&times;</button>
            </div>
            <div class="filters-modal-body">
                <div class="filter-group">
                    <label for="colorFilter">Signal Type</label>
                    <select id="colorFilter" onchange="updateFilterCount()">
                        <option value="">All Colors</option>
                        <option value="PURPLE">ğŸŸ£ Purple (Enhanced)</option>
                        <option value="RED">ğŸ”´ Red (Ultra)</option>
                        <option value="ORANGE">ğŸŸ  Orange (Extreme)</option>
                        <option value="GREEN">ğŸŸ¢ Green (Deep)</option>
                        <option value="YELLOW">ğŸŸ¡ Yellow (Crash)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="sectorFilter">Sector</label>
                    <select id="sectorFilter" onchange="updateFilterCount()">
                        <option value="">All Sectors</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="marketCapFilter">Market Cap</label>
                    <select id="marketCapFilter" onchange="updateFilterCount()">
                        <option value="">All Sizes</option>
                        <option value="0-1">< Â£1M (Nano)</option>
                        <option value="1-5">Â£1M - Â£5M</option>
                        <option value="5-20">Â£5M - Â£20M</option>
                        <option value="20-50">Â£20M - Â£50M</option>
                        <option value="50-100">Â£50M - Â£100M</option>
                        <option value="100-250">Â£100M - Â£250M</option>
                        <option value="250+">Â£250M+</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="dateRangeFilter">Signal Date</label>
                    <select id="dateRangeFilter" onchange="handleDateRangeChange(); updateFilterCount();">
                        <option value="all">All</option>
                        <option value="1m">1M</option>
                        <option value="3m" selected>3M</option>
                        <option value="6m">6M</option>
                        <option value="1y">1Y</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
                <div id="customDateInputs" class="custom-date-inputs" style="display: none;">
                    <input type="date" id="startDate" placeholder="Start Date" onchange="updateFilterCount()">
                    <span>â†’</span>
                    <input type="date" id="endDate" placeholder="End Date" onchange="updateFilterCount()">
                </div>
            </div>
            <div class="filters-modal-footer">
                <button class="btn-secondary" onclick="resetFilters()">Reset All</button>
                <button class="btn-primary" onclick="applyFilters()">Apply Filters</button>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
        <!-- FOOTER -->
    <footer style="margin-top: 4rem;">
        <p>&copy; 2025 CrashDash. Educational purposes only. Not financial advice.</p>
        <p style="margin-top: 0.5rem; font-size: 0.8rem;">âš¡ When the Market Breaks, You Learn.</p>
        <div style="margin-top: 1rem; display: flex; gap: 1.5rem; justify-content: center; align-items: center;">
            <a href="https://x.com/CrashDashAI" target="_blank" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.85rem; display: flex; align-items: center; gap: 0.4rem;" title="Follow us on X">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor">
                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                </svg>
                Follow on X
            </a>
            <a href="https://forms.gle/C5GChwRu8wYshbS69" target="_blank" style="color: rgba(255,255,255,0.7); text-decoration: none; font-size: 0.85rem;">âœ‰ï¸ Contact Us</a>
        </div>
    </footer>

    <!-- JAVASCRIPT -->
    <script src="app.js"></script>
</body>
</html>
